--- a/assets/game/shaders/sky.fsh
+++ b/assets/game/shaders/sky.fsh
@@ -1,4 +1,4 @@
-#version 330 core
+ï»¿#version 330 core
 #extension GL_ARB_explicit_attrib_location: enable
 
 in vec3 vertexPosition;
@@ -29,11 +29,17 @@
 	float sealevelOffsetFactor = 0.25;
 	getSkyColorAt(vertexPosition, sunPosition, sealevelOffsetFactor, clamp(dayLight, 0, 1), horizonFog, outColor, outGlow);
 	
-	outGlow.y *= clamp((dayLight - 0.05) * 2, 0, 1);
+	//outGlow.y *= clamp((dayLight - 0.05) * 2, 0, 1);
+	//outGlow.y = 0.5;
+#if GODRAYS > 0
+	float normalOut = 0.2f*dayLight;
+	float intensity = dot(normalize(shadowCoordsFar.xyz-shadowRayStart.xyz), normalize(shadowLightPos.xyz-shadowRayStart.xyz));
+	float phase = 2.5+exp(intensity*3.0)/3.0;
+	outGlow.y = pow(phase * normalOut, VOLUMETRIC_FLATNESS);
+#endif
 	
 #if SSAOLEVEL > 0
 	outGPosition = vec4(0);
 	outGNormal = vec4(0);
 #endif
-
 }
